 - What is phys_limit? How does dune_va_to_pa() work?
 - Why does malloc() yield very low addresses, ones that are not in the mmap range? Calling mmap() directly works as expected.

For example:

[src/main.c:182] main_info:  --- PML4 ---
[0] 0x0 - 0x8000000000 by PTE addr = 0x2001ff000 PTE_V PTE_W PTE_U (raw: 0x2001ff027)
[253] 0x7e8000000000 - 0x7f0000000000 by PTE addr = 0x2009f6000 PTE_V PTE_W PTE_U (raw: 0x2009f6027)
[255] 0x7f8000000000 - 0x800000000000 by PTE addr = 0x2087b6000 PTE_V PTE_W PTE_U (raw: 0x2087b6027)
[511] 0xff8000000000 - 0x1000000000000 by PTE addr = 0x2089b4000 PTE_V PTE_W PTE_U (raw: 0x2089b4027)

--- Process Map Dump ---
0x0000000000400000-0x000000000040a000 R-XP 00000000 /home/gabor/dev/vusec/thesis/test-dune/test-dune
0x0000000000609000-0x000000000060a000 R-XP 00009000 /home/gabor/dev/vusec/thesis/test-dune/test-dune
0x000000000060a000-0x000000000060d000 RWXP 0000a000 /home/gabor/dev/vusec/thesis/test-dune/test-dune
0x000000000060d000-0x000000000060f000 RWXP 00000000 
0x0000000001222000-0x0000000001245000 RWXP 00000000 [heap]
0x0000000200000000-0x0000000208a00000 RWXP 00000000 
0x00007eff5a191000-0x00007eff5b192000 RWXP 00000000 
0x00007eff5b192000-0x00007eff5b351000 R-XP 00000000 /lib/x86_64-linux-gnu/libc-2.23.so
0x00007eff5b351000-0x00007eff5b551000 ---P 001bf000 /lib/x86_64-linux-gnu/libc-2.23.so
0x00007eff5b551000-0x00007eff5b555000 R-XP 001bf000 /lib/x86_64-linux-gnu/libc-2.23.so
0x00007eff5b555000-0x00007eff5b557000 RWXP 001c3000 /lib/x86_64-linux-gnu/libc-2.23.so
0x00007eff5b557000-0x00007eff5b55b000 RWXP 00000000 
0x00007eff5b55b000-0x00007eff5b581000 R-XP 00000000 /lib/x86_64-linux-gnu/ld-2.23.so
0x00007eff5b752000-0x00007eff5b755000 RWXP 00000000 
0x00007eff5b77a000-0x00007eff5b780000 RWXP 00000000 
0x00007eff5b780000-0x00007eff5b781000 R-XP 00025000 /lib/x86_64-linux-gnu/ld-2.23.so
0x00007eff5b781000-0x00007eff5b782000 RWXP 00026000 /lib/x86_64-linux-gnu/ld-2.23.so
0x00007eff5b782000-0x00007eff5b783000 RWXP 00000000 
0x00007ffd9036f000-0x00007ffd90390000 RWXP 00000000 [stack]
0x00007ffd903a6000-0x00007ffd903a8000 R--P 00000000 [vvar]
0x00007ffd903a8000-0x00007ffd903aa000 R-XP 00000000 [vdso]
0xffffffffff600000-0xffffffffff601000 R-XP 00000000 [vsyscall]

[src/main.c:189] main_info: phys_limit = 0x8000000000
[src/main.c:190] main_info: mmap_base  = 0x7eefc0000000
[src/main.c:191] main_info: stack_base = 0x7ffd80000000

---- MALLOC ----

[src/main.c:222] analyze_ptr: p = 0x12224e0
[src/main.c:223] analyze_ptr: dune_va_to_pa => 0x12224e0
PTE addr = 0x1222000 PTE_V PTE_W PTE_U (raw: 0x1222067)
[src/main.c:232] analyze_ptr: Has uninitialized value: 0x7eff5b556128
[src/main.c:234] analyze_ptr: Wrote value: 0xdeadbeef

---- MMAP ----

[src/main.c:222] analyze_ptr: p = 0x7eff5b779000
[src/main.c:223] analyze_ptr: dune_va_to_pa => 0x7f9b779000
PTE addr = 0x7f9b779000 PTE_V PTE_W PTE_U (raw: 0x7f9b779007)
[src/main.c:232] analyze_ptr: Has uninitialized value: 0x0
[src/main.c:234] analyze_ptr: Wrote value: 0xdeadbeef
